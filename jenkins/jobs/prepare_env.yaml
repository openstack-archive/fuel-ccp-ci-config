- job:
    builders:
      - shell:
          !include-raw 'builders/prepare_env.sh'
    concurrent: true
    description: |
      Creates a python virtual environment for system tests. Stores additional images.<br><br>
      For 6.1 and above environments choose 2.9.x DevOps version from fuel-qa repository and old, 2.5.x from fuel-main for prior to 6.1.
    logrotate:
      daysToKeep: 14
    name: prepare_env
    parameters:
      - bool:
          name: 'update_devops_2_9_x'
          default: true
      - bool:
          name: 'update_devops_2_5_x'
          default: false
      - bool:
          name: 'download_images'
          default: false
      - bool:
          name: FORCE_DELETE_DEVOPS
          default: false
          description: 'Force to delete devops venv before update'
      - node:
          name: NODE
          allowed-multiselect: true
      - text:
          name: VENV_REQUIREMENTS
          default: ''
          description: 'Use custom requirements for venv'
    publishers:
      - email:
          notify-every-unstable-build: false
          recipients: 'ci+alert@mirantis.com'
    wrappers:
      - timeout:
          timeout: 60
