#
# Template for job executed manually
#
- job-template:
    name: build-all-docs-manual-job-{repo}
    description: |
      Docs build job executed manually
    node: docs
    builders:
      - shell:
          !include-raw 'builders/ng-build-specs.sh'
    concurrent: true
    wrappers:
      - ng-cleanup
      - nextgen-ci-docs
    scm:
      - fuel-infra:
          scm-basedir: ''
          scm-branch: '{branch}'
          scm-repo: 'nextgen/{repo}'
#
# Template for triggered job
#
- job-template:
    name: build-all-docs-triggered-job-{repo}
    description: |
      Docs build job triggered
    node: docs
    builders:
      - shell: |
          git clone ssh://nextgen-ci@review.fuel-infra.org:29418/$ZUUL_PROJECT .
          git fetch $ZUUL_URL/$ZUUL_PROJECT $ZUUL_REF
          git checkout FETCH_HEAD
      - shell:
          !include-raw 'builders/ng-build-specs.sh'
    concurrent: true
    wrappers:
      - ng-cleanup
      - nextgen-ci-docs
    triggers:
      - zuul


- project:
    name: nextgen-docs-build-jobs
    jobs:
       - 'build-all-docs-manual-job-{repo}'
       - 'build-all-docs-triggered-job-{repo}'
    repo:
       - 'nextgen-specs':
           branch: 'master'
