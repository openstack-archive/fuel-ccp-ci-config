#
# Jobs used to verify syntax in CI repository
#

# Shell
- job-template:
    name: verify-bashate-{repo}
    builders:
      - check-tox:
          tox-test: bashate
    concurrent: true
    description: |
      Bashate syntax test
    node: standard
    wrappers:
      - nextgen-ci-jenkins
    scm:
      - fuel-infra_trigger:
          scm-basedir: ''
          scm-repo: 'tools/{repo}'
    triggers:
      - gerrit:
          trigger-on:
            - patchset-created-event
            - comment-added-contains-event:
                comment-contains-value: 'recheck'
          projects:
            - project-compare-type: PLAIN
              project-pattern: 'tools/{repo}'
              branches:
                - branch-compare-type: ANT
                  branch-pattern: '**'
          custom-url: '* $JOB_NAME $BUILD_URL'

# JJB
- job-template:
    name: verify-jjb-{repo}
    builders:
      - check-tox:
          tox-test: nextgen-ci
    concurrent: true
    description: |
      JJB syntax test
    node: standard
    wrappers:
      - nextgen-ci-jenkins
    scm:
      - fuel-infra_trigger:
          scm-basedir: ''
          scm-repo: 'tools/{repo}'
    triggers:
      - gerrit:
          trigger-on:
            - patchset-created-event
            - comment-added-contains-event:
                comment-contains-value: 'recheck'
          projects:
            - project-compare-type: PLAIN
              project-pattern: 'tools/{repo}'
              branches:
                - branch-compare-type: ANT
                  branch-pattern: '**'
          custom-url: '* $JOB_NAME $BUILD_URL'

- project:
    name: verify-ci-bashate
    jobs:
       - 'verify-bashate-{repo}'
    repo:
       - 'project-config'

- project:
    name: verify-ci-jjb
    jobs:
       - 'verify-jjb-{repo}'
    repo:
       - 'ng-ci-configs'
