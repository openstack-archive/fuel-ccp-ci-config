- job:
    name: update-jenkins-jobs
    ci-name: jenkins-dev
    description: |
      Update jenkins jobs after merge
    node: standard
    builders:
      - inject:
          properties-content: 'CI_NAME={ci-name}'
      - shell: !include-raw builders/update-jenkins-post-job.sh
    concurrent: true
    scm:
      - fuel-infra:
          scm-repo: 'nextgen/project-config'
          scm-branch: 'origin/master'
          scm-basedir: ''
    wrappers:
      - ng-cleanup
      - nextgen-ci-jenkins
      - inject-passwords:
          global: true
    triggers:
      - timed: '0 * * * *'
      - gerrit:
          trigger-on:
            - change-merged-event
          projects:
            - project-compare-type: PLAIN
              project-pattern: 'nextgen/project-config'
              branches:
                - branch-compare-type: PLAIN
                  branch-pattern: 'master'
              file-paths:
                - compare-type: ANT
                  pattern: '{ci-name}/**'
